<ion-header [translucent]="true">
  <ion-toolbar>
    <div id="header">
      <ion-icon src="assets/svgUber.svg" alt="" id="logo"></ion-icon>
      <ion-title class="ion-text-center">
        Viaje
      </ion-title>
      <ion-icon src="assets/{{funciones.icono}}.svg" id="tema" (click)="cambiarTema()"></ion-icon>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div id="contenedor">
    <h3>Tu Viaje a {{viajeUsuario?.destino}} </h3>
    <span>{{viajeUsuario?.estado}} </span>
    <div id="viaje-img">
      <div id="descripcion">

        <div id="fechaHora">
          <span>Hora salida: {{viajeUsuario?.horaSalida}} </span>
          <span>{{fecha}} </span>
        </div>
      </div>
      <img src="assets\Ubicacion.jpg" alt="">
      <span>Tu destino</span>
    </div>

    <div id="viaje-img">
      <div id="descripcion">
        <div id="fechaHora">
          <span>Hora salida: {{viajeUsuario?.horaSalida}} </span>
          <span>{{fecha}} </span>
        </div>
      </div>
      <div id="mapa">
        <div id="mapa">
          <div id="info-viaje">
            <div class="distancia">
              <ion-icon name="analytics"></ion-icon>
              {{distancia}}
            </div>
            <div class="tiempo">
              <ion-icon name="time"></ion-icon>
              {{duracion}}
            </div>
          </div>
      
          <div #map id="map"></div>
      
          <input type="text" [(ngModel)]="end" (input)="updateSearchResults()" placeholder="Destino" id="input">
          <div id="rutas" *ngIf="autocompleteItems" [hidden]="autocompleteItems.length == 0">
            <div class="ruta" *ngFor="let item of autocompleteItems" tappable (click)="selectSearchResult(item)">
              {{ item.description }}
            </div>
          </div>
        </div>    
      </div>
      <span>Tu ubicacion</span>
    </div>

    <div id="tiempoEstimado">
      <div>
        <ion-icon src="assets/location.svg" alt=""></ion-icon>
        <p>Serrano 1105, Melipilla, Regi√≥n Metropolitana</p>
      </div>
      <div><ion-icon src="assets/time.svg" alt=""></ion-icon>
        <p>55 minutos, Trafico fluido</p>
      </div>
      <div><ion-icon src="assets/finish_flag.svg" alt=""></ion-icon>
        <p>>{{viajeUsuario?.destino}}</p>
      </div>
    </div>
    <h2>Detalles</h2>
    <div id="detalles">
      <div> <ion-icon src="assets/passenger.svg" alt=""></ion-icon>
        <p>Cantidad de pasajero(s): {{viajeUsuario?.cantidadPasajeros}}</p>
      </div>
      <div> <ion-icon src="assets/money.svg" alt=""></ion-icon>
        <p>Costo de viaje: ${{viajeUsuario?.MontoCobrar}} por persona</p>
      </div>
      <div>
        <ion-icon src="assets/travel.svg" alt=""></ion-icon>
        <p>Tipo de Vehiculo: Auto</p>
      </div>
      <div>
        <ion-icon src="assets/location.svg" alt=""></ion-icon>
       <div id="descMonto"> 
        <span>Punto de encuentro</span>
        <span>--{{viajeUsuario?.puntoEncuentro}}--</span></div>
      </div>
    </div>
    <div id="detalles-loc">
      <h2>Monto a Recolectar</h2>
      <p>${{viajeUsuario?.MontoCobrar}} pesos x Persona({{viajeUsuario?.cantidadPasajeros}})</p>
      <p>Monto Total: ${{getTotal()}}</p>
    </div>
    <ion-modal #modal trigger="open-modal">
      <ng-template>
        <ion-content>
          <ion-toolbar>
            <ion-title>Pasajeros</ion-title>
            <ion-buttons slot="end">
              <ion-button color="" id="closebtn" (click)="modal.dismiss()">Cerrar</ion-button>
            </ion-buttons>
          </ion-toolbar>
          <ion-list>
            <ion-item *ngIf="viajeUsuario?.pasajeros.length === 0">
              <ion-label>
                <h2>No hay pasajeros.</h2>
              </ion-label>
            </ion-item>
          
            <ion-item *ngFor="let pasajero of viajeUsuario?.pasajeros">
              <ion-avatar slot="start">
                <ion-icon name="user" src="assets/profile.svg"></ion-icon>
              </ion-avatar>
              <ion-label>
                <h2>{{ pasajero.usuario }}</h2>
                <p>Paga en: {{ pasajero.destino }}</p>
                <p>Baja en: {{ pasajero.fPago }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-content>
      </ng-template>
    </ion-modal>

  <div id="botonera">
    <ion-button (click)="cambiarEstadoViaje('Viaje Iniciado')" color="tertiary">Comenzar Viaje</ion-button>
    <ion-button (click)="cambiarEstadoViaje('Viaje Terminado')" color="danger">Terminar Viaje</ion-button>
    <ion-button id="open-modal" (click)="actualizarViaje()" expand="block">Ver Pasajeros</ion-button>

  </div>
  </div>

</ion-content>
